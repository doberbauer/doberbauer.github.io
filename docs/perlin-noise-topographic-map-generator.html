<!DOCTYPE html>
<html lang="english">
        <head>
                        <meta charset="utf-8" />
                        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
                        <meta name="generator" content="Pelican" />
                        <title>Perlin Noise Topographic Map Generator</title>
                        <link rel="stylesheet" href="/theme/css/main.css" />
    <meta name="description" content="I've always loved topographic maps. They're so useful but so rarely used in everyday life. I recently had some time on my hands and decided to..." />
        </head>

        <body id="index" class="home">
                <header id="banner" class="body">
                        <h1><a href="/">Daniel Oberbauer</a></h1>
                        <nav><ul>
                                                <li class="active"><a href="/category/art.html">Art</a></li>
                                                <li><a href="/category/exploration.html">Exploration</a></li>
                                                <li><a href="/category/project.html">Project</a></li>
                                                <li><a href="/category/resources.html">Resources</a></li>
                        </ul></nav>
                </header><!-- /#banner -->
  <section id="content" class="body">
    <article>
      <header>
        <h1 class="entry-title">
          <a href="/perlin-noise-topographic-map-generator.html" rel="bookmark"
             title="Permalink to Perlin Noise Topographic Map Generator">Perlin Noise Topographic Map Generator</a></h1>
      </header>

      <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2024-01-01T12:00:00-08:00">
                Published: Mon 01 January 2024
        </abbr>

                <address class="vcard author">
                        By                                 <a class="url fn" href="/author/daniel-oberbauer.html">Daniel Oberbauer</a>
                </address>
        <p>In <a href="/category/art.html">Art</a>.</p>
        
</footer><!-- /.post-info -->        <p>I've always loved <a href="https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fi.pinimg.com%2Foriginals%2F13%2F8c%2F83%2F138c83d3c62e3c3b5cdc413704bc6ce5.jpg&amp;f=1&amp;nofb=1&amp;ipt=8fa67a08008a5a888c1789d03ab113c00c8bb66c3cf9eb6f49bc47aa65127e6d&amp;ipo=images">topographic maps</a>. They're so useful but so rarely used in everyday life. I recently had some time on my hands and decided to whip up some code to generate some procedural topographic maps. </p>
<p><img alt="Hyperific's blog" src="https://bear-images.sfo2.cdn.digitaloceanspaces.com/hyperific-1705962508-0.png"></p>
<p><img alt="Hyperific's blog" src="https://bear-images.sfo2.cdn.digitaloceanspaces.com/hyperific-1705962551-0.png"></p>
<h1>Generating the noise texture</h1>
<p>I knew from my tinkering with Blender and Photoshop that there's a pretty solid cloud/height map noise generation method. A little searching revealed it's called <a href="https://en.wikipedia.org/wiki/Perlin_noise">Perlin Noise</a> and it's commonly used to procedurally generate terrain in computer graphics. </p>
<p>I was coding all this on my phone via Pydroid 3 and I didn't want to install some random perlin noise package from pip. I wanted a simple straightforward numpy implementation. 
I did a quick search for "Python Perlin noise numpy" and found <a href="https://saturncloud.io/blog/producing-2d-perlin-noise-with-numpy-a-comprehensive-guide-for-data-scientists/">this</a> article with code. </p>
<p>It did a nice job of generating the texture so I moved on to drawing topo lines.</p>
<h1>Generating interval lines</h1>
<p>It may not be the <em>best</em> way to do this, but it's the way that made sense to me at the time. 
1. Use the code from the article to generate a noise matrix. 
2. Get the values of the highest peek and the lowest valley
3. Slice through the terrain from bottom to top at set intervals
4. Use binary dilation to find the boundary of the slice
5. Append the boundaries to a boundaries matrix</p>
<p>This just yields the boundaries as a mask. 
<code>noise[mask] = 1</code> overlays the mask onto the original array. </p>
<h1>Improvements</h1>
<p>I didn't like how this looked so I went a step further.
The raw noise texture has very smooth gradients and in the final image with the topo lines it just looked too fluffy and soft. 
I wrote another method that does the following:
1. Iteratively slice through the noise matrix from bottom to top
2. Mask the noise matrix with each slice
3. Set all the values for pixels within the mask to the same value (the index of the slice)
4. Output the resulting noise matrix.</p>
<p>Now instead of <a href="https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Frmarcus.info%2Fblog%2Fassets%2Fperlin%2Fraw%2Foctaves.png&amp;f=1&amp;nofb=1&amp;ipt=23f9b35dd60ce793ca61e3b142f2c4138cf57bac8b42d94418bc529e0cdafffd&amp;ipo=images">smooth gradients</a> I had nice <a href="https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fi.etsystatic.com%2F9147400%2Fr%2Fil%2F48cc55%2F2068811700%2Fil_fullxfull.2068811700_aie8.jpg&amp;f=1&amp;nofb=1&amp;ipt=d0005b62a7f991f54af6d378be311bcbffc6a4d1f827931329aef8b43f47d768&amp;ipo=images">flat steps</a> that were more appealing to my eye. </p>
<p><a href="https://gist.github.com/hyperific/6d0565ce85a052839fc8e95aa109fbe9">Perlin github gist</a></p>
      </div><!-- /.entry-content -->

    </article>
  </section>
                <section id="extras" class="body">
                                <div class="blogroll">
                                        <h2>links</h2>
                                        <ul>
                                                        <li><a href="https://getpelican.com/">Pelican</a></li>
                                                        <li><a href="https://www.python.org/">Python.org</a></li>
                                                        <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                                                        <li><a href="#">You can modify those links in your config file</a></li>
                                        </ul>
                                </div><!-- /.blogroll -->
                                <div class="social">
                                        <h2>social</h2>
                                        <ul>

                                                        <li><a href="#">You can add links in your config file</a></li>
                                                        <li><a href="#">Another social link</a></li>
                                        </ul>
                                </div><!-- /.social -->
                </section><!-- /#extras -->

                <footer id="contentinfo" class="body">
                        <address id="about" class="vcard body">
                                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                        </address><!-- /#about -->

                        <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
                </footer><!-- /#contentinfo -->

        </body>
</html>