<p>This is an exercise I did to keep myself busy while processing
data.</p>
<p>It’s a procedural plaid pattern generator written in Python. It
produces a Gingham, Buffalo or plaid pattern with procedural colors and
design elements.</p>
<p><a href="https://github.com/hyperific/gone_to_plaid">Just show me the
code</a></p>
<figure>
<img
src="https://bear-images.sfo2.cdn.digitaloceanspaces.com/hyperific-1706130144-0.png"
alt="Hyperific’s blog" />
<figcaption aria-hidden="true">Hyperific’s blog</figcaption>
</figure>
<h1 id="gingham-and-buffalo">Gingham and Buffalo</h1>
<p>Buffalo plaid is characterized by a colored background (usually red)
and black crisscrossing lines, forming solid squares where they
intersect. <img
src="https://bear-images.sfo2.cdn.digitaloceanspaces.com/hyperific-1705965396-0.png"
alt="Hyperific’s blog" /></p>
<p>Gingham is similar except the background is always white and the
lines are variable colors (usually red). <img
src="https://bear-images.sfo2.cdn.digitaloceanspaces.com/hyperific-1705965482-0.png"
alt="Hyperific’s blog" /></p>
<p>I’m not a strict disciple of the church of “Don’t Repeat Yourself” so
the functions for gingham and buffalo plaid look pretty much the same
except for the color generation handling.</p>
<p>I could have made buffalo and gingham using intersecting lines or
rectangles but instead of opted to make the pattern out of squares. To
make squares I used PIL ImageDraw’s <code>rectangle()</code> function.
It needs a tuple <code>shape</code>, and an RGB color tuple
<code>fill</code>. Shape is (x1,y1,x2,y2), or top left x coordinate, top
left y coordinate, bottom right x coordinate, bottom right y
coordinate.</p>
<p>First I get 20 linearly spaced values from 0 to the width of the
image. These will act as the X and Y coordinates of each rectangle’s top
left corner. Since the spacing is variable I also grab the second value
of the spacing array and save it so I can calculate the bottom right
corner. I loop through rows first, then columns, so the pattern is build
from left to right and top to bottom. The shape becomes
<code>(spacing[col],spacing[row],spacing[col]+dif,spacing[row]+dif)</code>
For row 1 column 1 with a difference in spacing of 50 pixels the shape
would be <code>(0,0,0+50,0+50)</code>.</p>
<p>Now let’s talk colors. Every time you call the gingham or buffalo
function it generates the pattern with a unique randomly chosen color. I
opted for HSL colors since they’re intuitive and it’s easy to convert
them to RGB later. First, a base hue is chosen as a random angle between
0 and 359 degrees of the color wheel. From this base hue all the colors
of the pattern will be derived. Buffalo colors differ only by luminance,
gingham patterns differ only by saturation. As the loop proceeds through
rows and columns colors are chosen based on whether the column and row
numbers are even or odd.</p>
<h1 id="plaid">Plaid</h1>
<p>Plaid is where things go off-script. There are <em>loads</em> of
different plaid variations.</p>
<figure>
<img
src="https://bear-images.sfo2.cdn.digitaloceanspaces.com/hyperific-1705965550-1.jpg"
alt="Hyperific’s blog" />
<figcaption aria-hidden="true">Hyperific’s blog</figcaption>
</figure>
<figure>
<img
src="https://bear-images.sfo2.cdn.digitaloceanspaces.com/hyperific-1705965550-0.png"
alt="Hyperific’s blog" />
<figcaption aria-hidden="true">Hyperific’s blog</figcaption>
</figure>
<p>Unlike buffalo and gingham, here I <em>did</em> decide to use
intersecting lines. I’ll try my best to keep this from getting too
convoluted but maybe grab another cup of coffee just in case.</p>
<p>My plaid patterns are made up of three basic elements: - Thick lines
- Medium lines - Thin lines There are also two optional elements: -
Boxes at intersections - Additional thin horizontal or vertical line</p>
<p>The number, thickness, color and presence of some lines is
randomized.</p>
<p>As for colors, first the saturation for most of the colors is
determined randomly. The background and box hues are determined
separately as values between 0 and 359. Then there’s a possibility of
having other colors be analogous or complementary by making an array
<code>degree_diff = [30,-30,180,-180]</code>, randomly indexing into it
and hen subtracting that value from other hues. Once the HSV colors are
determined they’re converted to RGB. Thin lines have randomly determined
luminance values, but their hue and saturation are static.</p>
<p>There are some randomly determined offsets for lines and boxes and
whatnot and those end up trickling down and influencing the positions of
sub-elements. Once all the elements are drawn we end up with 1/4 of the
final image. I figured why bother with the extra hassle when I could
just flip and mirror the image? It’s the same information just
transformed a bit.</p>
<p>At the end there’s a coin flip to determine if thin diagonal lines
with be drawn over the top of the image to create a fabric-like
texture.</p>
<h1 id="code">Code</h1>
<div class="sourceCode" id="cb1"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> PIL <span class="im">import</span> Image, ImageDraw, ImageOps</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> colorsys</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> uuid</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> argparse</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> main(mode):</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> mode <span class="op">==</span> <span class="st">&#39;plaid&#39;</span>:</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>        _plaid()</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> mode <span class="op">==</span> <span class="st">&#39;buffalo&#39;</span>:</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>        _buffalo()</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> mode <span class="op">==</span> <span class="st">&#39;gingham&#39;</span>:</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>        _gingham()</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> _gingham(w<span class="op">=</span><span class="dv">1000</span>,h<span class="op">=</span><span class="dv">1000</span>):</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Gingham is defined by a white background and evenly spaced colored lines. </span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Horizontal and vertical lines have different saturation values</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Where lines intersect the color is darker still</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># In this implementation I&#39;ve chosen to use rectangles instead of lines.</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>    image <span class="op">=</span> Image.new(<span class="st">&quot;RGBA&quot;</span>, (w,h), <span class="st">&quot;white&quot;</span>)</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>    draw <span class="op">=</span> ImageDraw.Draw(image)</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>    spacing <span class="op">=</span> np.linspace(<span class="dv">0</span>,w,<span class="dv">20</span>)</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>    dif <span class="op">=</span> spacing[<span class="dv">1</span>] <span class="co">#This is the difference in spacing between each value of spacing</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>    <span class="co"># The hue is generated randomly as a value between 0 and 359 (the color wheel being 360 degrees)</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>    <span class="co"># This value is divided by 100 since colorsys represents hsv as percentages</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>    hue <span class="op">=</span> np.random.randint(<span class="dv">0</span>,<span class="dv">359</span>)<span class="op">/</span><span class="dv">100</span> </span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Colors for background, and the 3 different colored boxes are generated</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>    color1 <span class="op">=</span> _hsv2rgb(hue,<span class="dv">0</span>,<span class="dv">1</span>)</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>    color2 <span class="op">=</span> _hsv2rgb(hue,<span class="fl">0.5</span>,<span class="dv">1</span>)</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>    color3 <span class="op">=</span> _hsv2rgb(hue,<span class="fl">0.25</span>,<span class="dv">1</span>)</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>    color4 <span class="op">=</span> _hsv2rgb(hue,<span class="fl">0.75</span>,<span class="dv">1</span>)</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Rows and columns are looped through. Colors are alternated based on whether the row</span></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>    <span class="co"># index is even or odd.</span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> row <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(spacing)):</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> row<span class="op">%</span><span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>            colors <span class="op">=</span> [color1,color2]</span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>            colors <span class="op">=</span> [color3,color4]</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> col <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(spacing)):</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>            shape <span class="op">=</span> (spacing[col],spacing[row],spacing[col]<span class="op">+</span>dif,spacing[row]<span class="op">+</span>dif)</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>            draw.rectangle(shape,fill<span class="op">=</span>colors[col<span class="op">%</span><span class="dv">2</span>])</span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>    <span class="co"># It&#39;s randomly decided whether to additionally draw diagonal lines across the whole image</span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>    <span class="co"># These diagonal lines are usually present in some fashion in plaid patterns</span></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> np.random.randint(<span class="dv">2</span>):</span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>        dlines <span class="op">=</span> _diagonal_lines(w<span class="op">*</span><span class="dv">4</span>,h<span class="op">*</span><span class="dv">4</span>,color<span class="op">=</span><span class="st">&quot;white&quot;</span>,n<span class="op">=</span><span class="dv">500</span>)</span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>        image.paste(dlines,(<span class="dv">0</span>,<span class="dv">0</span>),dlines)</span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>    image.show()</span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>    _save_pattern(image)</span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> _buffalo(w<span class="op">=</span><span class="dv">1000</span>,h<span class="op">=</span><span class="dv">1000</span>):</span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Buffalo plaid is similar to gingham. It&#39;s defined by a colored background and</span></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>    <span class="co"># black/gray lines. Where the lines intersect they&#39;re usually darker.</span></span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Like gingham, horizontal and vertical lines typically have different intensities.</span></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>    <span class="co"># In this implementation I&#39;ve chosen to use rectangles instead of lines.</span></span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>    image <span class="op">=</span> Image.new(<span class="st">&quot;RGBA&quot;</span>, (w,h), <span class="st">&quot;white&quot;</span>)</span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a>    draw <span class="op">=</span> ImageDraw.Draw(image)</span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>    spacing <span class="op">=</span> np.linspace(<span class="dv">0</span>,w,<span class="dv">20</span>)</span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a>    dif <span class="op">=</span> spacing[<span class="dv">1</span>] <span class="co">#This is the difference in spacing between each value of spacing</span></span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a>    <span class="co"># The hue is generated randomly as a value between 0 and 359 (the color wheel being 360 degrees)</span></span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a>    <span class="co"># This value is divided by 100 since colorsys represents hsv as percentages</span></span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a>    hue <span class="op">=</span> np.random.randint(<span class="dv">0</span>,<span class="dv">359</span>)<span class="op">/</span><span class="dv">100</span></span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Colors for background, and the 3 different colored boxes are generated</span></span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a>    color1 <span class="op">=</span> _hsv2rgb(hue,<span class="dv">1</span>,<span class="dv">1</span>)</span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a>    color2 <span class="op">=</span> _hsv2rgb(hue,<span class="dv">1</span>,<span class="fl">0.5</span>)</span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a>    color3 <span class="op">=</span> _hsv2rgb(hue,<span class="dv">1</span>,<span class="fl">0.25</span>)</span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a>    color4 <span class="op">=</span> _hsv2rgb(hue,<span class="dv">1</span>,<span class="dv">0</span>)</span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Rows and columns are looped through. Colors are alternated based on whether the row</span></span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a>    <span class="co"># index is even or odd.</span></span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> row <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(spacing)):</span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> row<span class="op">%</span><span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a>            colors <span class="op">=</span> [color1,color2]</span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a>            colors <span class="op">=</span> [color3,color4]</span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> col <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(spacing)):</span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a>            shape <span class="op">=</span> (spacing[col],spacing[row],spacing[col]<span class="op">+</span>dif,spacing[row]<span class="op">+</span>dif)</span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a>            draw.rectangle(shape,fill<span class="op">=</span>colors[col<span class="op">%</span><span class="dv">2</span>])</span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true" tabindex="-1"></a>    <span class="co"># It&#39;s randomly decided whether to additionally draw diagonal lines across the whole image</span></span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true" tabindex="-1"></a>    <span class="co"># These diagonal lines are usually present in some fashion in plaid patterns   </span></span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> np.random.randint(<span class="dv">2</span>):</span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a>        dlines <span class="op">=</span> _diagonal_lines(w<span class="op">*</span><span class="dv">4</span>,h<span class="op">*</span><span class="dv">4</span>,color<span class="op">=</span>color1,n<span class="op">=</span><span class="dv">500</span>)</span>
<span id="cb1-99"><a href="#cb1-99" aria-hidden="true" tabindex="-1"></a>        image.paste(dlines,(<span class="dv">0</span>,<span class="dv">0</span>),dlines)</span>
<span id="cb1-100"><a href="#cb1-100" aria-hidden="true" tabindex="-1"></a>    image.show()</span>
<span id="cb1-101"><a href="#cb1-101" aria-hidden="true" tabindex="-1"></a>    _save_pattern(image)</span>
<span id="cb1-102"><a href="#cb1-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-103"><a href="#cb1-103" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> _plaid():</span>
<span id="cb1-104"><a href="#cb1-104" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plaid patterns are diverse. This implementation uses rules which generate only</span></span>
<span id="cb1-105"><a href="#cb1-105" aria-hidden="true" tabindex="-1"></a>    <span class="co"># a subset of the plaid patterns that exist in the wild. </span></span>
<span id="cb1-106"><a href="#cb1-106" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-107"><a href="#cb1-107" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Background and major element colors are generated randomly</span></span>
<span id="cb1-108"><a href="#cb1-108" aria-hidden="true" tabindex="-1"></a>    <span class="co"># All other elements are procedurally generated to be harmoneous</span></span>
<span id="cb1-109"><a href="#cb1-109" aria-hidden="true" tabindex="-1"></a>    <span class="co"># with major element colors. They can be complementary or analogous.</span></span>
<span id="cb1-110"><a href="#cb1-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-111"><a href="#cb1-111" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Height and width here describe the initial tile dimensions</span></span>
<span id="cb1-112"><a href="#cb1-112" aria-hidden="true" tabindex="-1"></a>    <span class="co"># This tile will be copied 3 times, resulting in an image whose</span></span>
<span id="cb1-113"><a href="#cb1-113" aria-hidden="true" tabindex="-1"></a>    <span class="co"># dimensions are (w*4,h*4)</span></span>
<span id="cb1-114"><a href="#cb1-114" aria-hidden="true" tabindex="-1"></a>    w <span class="op">=</span> <span class="dv">250</span> </span>
<span id="cb1-115"><a href="#cb1-115" aria-hidden="true" tabindex="-1"></a>    h <span class="op">=</span> <span class="dv">250</span></span>
<span id="cb1-116"><a href="#cb1-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-117"><a href="#cb1-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-118"><a href="#cb1-118" aria-hidden="true" tabindex="-1"></a>    sat <span class="op">=</span> np.random.random() <span class="co"># Random saturation value between 0 and 1</span></span>
<span id="cb1-119"><a href="#cb1-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-120"><a href="#cb1-120" aria-hidden="true" tabindex="-1"></a>    <span class="co">#Background and box hues are randomly generated integers between 0 and 359 (colorwheel being 360 degrees)</span></span>
<span id="cb1-121"><a href="#cb1-121" aria-hidden="true" tabindex="-1"></a>    bkg_hue <span class="op">=</span> np.random.randint(<span class="dv">0</span>,<span class="dv">359</span>)</span>
<span id="cb1-122"><a href="#cb1-122" aria-hidden="true" tabindex="-1"></a>    box_hue <span class="op">=</span> np.random.randint(<span class="dv">0</span>,<span class="dv">359</span>)</span>
<span id="cb1-123"><a href="#cb1-123" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-124"><a href="#cb1-124" aria-hidden="true" tabindex="-1"></a>    <span class="co"># This is a list of possible colorwheel degree differences</span></span>
<span id="cb1-125"><a href="#cb1-125" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 30 and -30 are analogous colors</span></span>
<span id="cb1-126"><a href="#cb1-126" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 180 and -180 are complementary colors</span></span>
<span id="cb1-127"><a href="#cb1-127" aria-hidden="true" tabindex="-1"></a>    degree_diff <span class="op">=</span> [<span class="dv">30</span>,<span class="op">-</span><span class="dv">30</span>,<span class="dv">180</span>,<span class="op">-</span><span class="dv">180</span>]</span>
<span id="cb1-128"><a href="#cb1-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-129"><a href="#cb1-129" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Thick line hues are defined by the box hue minus a randomly decided degree difference</span></span>
<span id="cb1-130"><a href="#cb1-130" aria-hidden="true" tabindex="-1"></a>    thick_hue <span class="op">=</span> box_hue<span class="op">-</span>degree_diff[np.random.randint(<span class="dv">4</span>)]</span>
<span id="cb1-131"><a href="#cb1-131" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-132"><a href="#cb1-132" aria-hidden="true" tabindex="-1"></a>    <span class="co"># RGB colors are calculated from the above HSV.</span></span>
<span id="cb1-133"><a href="#cb1-133" aria-hidden="true" tabindex="-1"></a>    bkg_color <span class="op">=</span> _hsv2rgb(bkg_hue<span class="op">/</span><span class="dv">100</span>,sat,<span class="fl">0.8</span>)</span>
<span id="cb1-134"><a href="#cb1-134" aria-hidden="true" tabindex="-1"></a>    box_color <span class="op">=</span> _hsv2rgb(box_hue<span class="op">/</span><span class="dv">100</span>,sat,<span class="fl">0.5</span>)</span>
<span id="cb1-135"><a href="#cb1-135" aria-hidden="true" tabindex="-1"></a>    thick_color <span class="op">=</span> _hsv2rgb(thick_hue<span class="op">/</span><span class="dv">100</span>,sat,<span class="fl">0.60</span>)</span>
<span id="cb1-136"><a href="#cb1-136" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-137"><a href="#cb1-137" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Thin lines can be 95%, 60% and 0.5% bright</span></span>
<span id="cb1-138"><a href="#cb1-138" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Brightness is randomly picked from the list.</span></span>
<span id="cb1-139"><a href="#cb1-139" aria-hidden="true" tabindex="-1"></a>    thin_vals <span class="op">=</span> [<span class="fl">0.95</span>,<span class="fl">0.60</span>,<span class="fl">0.05</span>]</span>
<span id="cb1-140"><a href="#cb1-140" aria-hidden="true" tabindex="-1"></a>    thin_color <span class="op">=</span> _hsv2rgb(thick_hue<span class="op">/</span><span class="dv">100</span>,<span class="fl">0.15</span>,thin_vals[np.random.randint(<span class="dv">2</span>)])</span>
<span id="cb1-141"><a href="#cb1-141" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-142"><a href="#cb1-142" aria-hidden="true" tabindex="-1"></a>    img <span class="op">=</span> Image.new(<span class="st">&quot;RGBA&quot;</span>,(w,h),bkg_color)</span>
<span id="cb1-143"><a href="#cb1-143" aria-hidden="true" tabindex="-1"></a>    draw <span class="op">=</span> ImageDraw.Draw(img)</span>
<span id="cb1-144"><a href="#cb1-144" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-145"><a href="#cb1-145" aria-hidden="true" tabindex="-1"></a>    line_offset <span class="op">=</span> np.random.randint(<span class="dv">25</span>,<span class="dv">50</span>)</span>
<span id="cb1-146"><a href="#cb1-146" aria-hidden="true" tabindex="-1"></a>    line_offset <span class="op">-=</span> line_offset <span class="op">%</span> <span class="dv">5</span></span>
<span id="cb1-147"><a href="#cb1-147" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-148"><a href="#cb1-148" aria-hidden="true" tabindex="-1"></a>    box_offset <span class="op">=</span> np.random.randint(<span class="dv">20</span>,<span class="dv">40</span>)</span>
<span id="cb1-149"><a href="#cb1-149" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> box_offset <span class="op">%</span><span class="dv">2</span> <span class="op">!=</span><span class="dv">0</span>:</span>
<span id="cb1-150"><a href="#cb1-150" aria-hidden="true" tabindex="-1"></a>        box_offset <span class="op">+=</span><span class="dv">1</span></span>
<span id="cb1-151"><a href="#cb1-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-152"><a href="#cb1-152" aria-hidden="true" tabindex="-1"></a>    vline <span class="op">=</span> (line_offset<span class="op">+</span>box_offset<span class="op">/</span><span class="dv">2</span>,<span class="dv">0</span>,line_offset<span class="op">+</span>box_offset<span class="op">/</span><span class="dv">2</span>,h)</span>
<span id="cb1-153"><a href="#cb1-153" aria-hidden="true" tabindex="-1"></a>    draw.line(vline,fill<span class="op">=</span>thick_color,width<span class="op">=</span>box_offset<span class="op">+</span><span class="dv">1</span>)</span>
<span id="cb1-154"><a href="#cb1-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-155"><a href="#cb1-155" aria-hidden="true" tabindex="-1"></a>    hline <span class="op">=</span> (<span class="dv">0</span>,line_offset<span class="op">+</span>box_offset<span class="op">/</span><span class="dv">2</span>,w,line_offset<span class="op">+</span>box_offset<span class="op">/</span><span class="dv">2</span>)</span>
<span id="cb1-156"><a href="#cb1-156" aria-hidden="true" tabindex="-1"></a>    draw.line(hline,fill<span class="op">=</span>thick_color,width<span class="op">=</span>box_offset<span class="op">+</span><span class="dv">1</span>)</span>
<span id="cb1-157"><a href="#cb1-157" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-158"><a href="#cb1-158" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> np.random.randint(<span class="dv">2</span>):</span>
<span id="cb1-159"><a href="#cb1-159" aria-hidden="true" tabindex="-1"></a>        vline1 <span class="op">=</span> (line_offset<span class="op">-</span>box_offset,<span class="dv">0</span>,line_offset<span class="op">-</span>box_offset,h)</span>
<span id="cb1-160"><a href="#cb1-160" aria-hidden="true" tabindex="-1"></a>        draw.line(vline1,fill<span class="op">=</span>thick_color,width<span class="op">=</span><span class="bu">int</span>(box_offset<span class="op">/</span><span class="dv">4</span><span class="op">+</span><span class="dv">1</span>))</span>
<span id="cb1-161"><a href="#cb1-161" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-162"><a href="#cb1-162" aria-hidden="true" tabindex="-1"></a>        vline2 <span class="op">=</span> (line_offset<span class="op">+</span>box_offset<span class="op">*</span><span class="dv">2</span>,<span class="dv">0</span>,line_offset<span class="op">+</span>box_offset<span class="op">*</span><span class="dv">2</span>,h)</span>
<span id="cb1-163"><a href="#cb1-163" aria-hidden="true" tabindex="-1"></a>        draw.line(vline2,fill<span class="op">=</span>thick_color,width<span class="op">=</span><span class="bu">int</span>(box_offset<span class="op">/</span><span class="dv">4</span><span class="op">+</span><span class="dv">1</span>))</span>
<span id="cb1-164"><a href="#cb1-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-165"><a href="#cb1-165" aria-hidden="true" tabindex="-1"></a>        hline1 <span class="op">=</span> (<span class="dv">0</span>,line_offset<span class="op">-</span>box_offset,w,line_offset<span class="op">-</span>box_offset)</span>
<span id="cb1-166"><a href="#cb1-166" aria-hidden="true" tabindex="-1"></a>        draw.line(hline1,fill<span class="op">=</span>thick_color,width<span class="op">=</span><span class="bu">int</span>(box_offset<span class="op">/</span><span class="dv">4</span><span class="op">+</span><span class="dv">1</span>))</span>
<span id="cb1-167"><a href="#cb1-167" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-168"><a href="#cb1-168" aria-hidden="true" tabindex="-1"></a>        hline2 <span class="op">=</span> (<span class="dv">0</span>,line_offset<span class="op">+</span>box_offset<span class="op">*</span><span class="dv">2</span>,w,line_offset<span class="op">+</span>box_offset<span class="op">*</span><span class="dv">2</span>)</span>
<span id="cb1-169"><a href="#cb1-169" aria-hidden="true" tabindex="-1"></a>        draw.line(hline2,fill<span class="op">=</span>thick_color,width<span class="op">=</span><span class="bu">int</span>(box_offset<span class="op">/</span><span class="dv">4</span><span class="op">+</span><span class="dv">1</span>))</span>
<span id="cb1-170"><a href="#cb1-170" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-171"><a href="#cb1-171" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Coinflip whether to draw boxes at line intersections</span></span>
<span id="cb1-172"><a href="#cb1-172" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> np.random.randint(<span class="dv">2</span>):</span>
<span id="cb1-173"><a href="#cb1-173" aria-hidden="true" tabindex="-1"></a>        box <span class="op">=</span> (line_offset,line_offset,line_offset<span class="op">+</span>box_offset,line_offset<span class="op">+</span>box_offset)</span>
<span id="cb1-174"><a href="#cb1-174" aria-hidden="true" tabindex="-1"></a>        draw.rectangle(box,fill<span class="op">=</span>box_color)</span>
<span id="cb1-175"><a href="#cb1-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-176"><a href="#cb1-176" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Coinflip whether to draw an additional line</span></span>
<span id="cb1-177"><a href="#cb1-177" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Coinflip whether the line is drawn horizontal or vertical</span></span>
<span id="cb1-178"><a href="#cb1-178" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> np.random.randint(<span class="dv">2</span>):</span>
<span id="cb1-179"><a href="#cb1-179" aria-hidden="true" tabindex="-1"></a>        direction <span class="op">=</span> np.random.randint(<span class="dv">2</span>)</span>
<span id="cb1-180"><a href="#cb1-180" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> direction:</span>
<span id="cb1-181"><a href="#cb1-181" aria-hidden="true" tabindex="-1"></a>            extra_line <span class="op">=</span> (<span class="dv">0</span>,line_offset<span class="op">*</span><span class="dv">2</span><span class="op">+</span>box_offset<span class="op">*</span><span class="dv">2</span>,w,line_offset<span class="op">*</span><span class="dv">2</span><span class="op">+</span>box_offset<span class="op">*</span><span class="dv">2</span>)</span>
<span id="cb1-182"><a href="#cb1-182" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb1-183"><a href="#cb1-183" aria-hidden="true" tabindex="-1"></a>            extra_line <span class="op">=</span> (line_offset<span class="op">*</span><span class="dv">2</span><span class="op">+</span>box_offset<span class="op">*</span><span class="dv">2</span>,<span class="dv">0</span>,line_offset<span class="op">*</span><span class="dv">2</span><span class="op">+</span>box_offset<span class="op">*</span><span class="dv">2</span>,h)</span>
<span id="cb1-184"><a href="#cb1-184" aria-hidden="true" tabindex="-1"></a>        draw.line(extra_line,fill<span class="op">=</span>thick_color,width<span class="op">=</span>(<span class="bu">int</span>(box_offset<span class="op">/</span><span class="dv">4</span>)))</span>
<span id="cb1-185"><a href="#cb1-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-186"><a href="#cb1-186" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Additional thin horizontal and vertical lines are drawn</span></span>
<span id="cb1-187"><a href="#cb1-187" aria-hidden="true" tabindex="-1"></a>    <span class="co"># The number of lines is randomly chosen between 3 and 5</span></span>
<span id="cb1-188"><a href="#cb1-188" aria-hidden="true" tabindex="-1"></a>    <span class="co"># There&#39;s an additional coinflip to add additional spacing to the line offsets</span></span>
<span id="cb1-189"><a href="#cb1-189" aria-hidden="true" tabindex="-1"></a>    num_lines <span class="op">=</span> np.random.randint(<span class="dv">3</span>,<span class="dv">6</span>)</span>
<span id="cb1-190"><a href="#cb1-190" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> num_lines <span class="op">%</span><span class="dv">2</span> <span class="op">!=</span><span class="dv">0</span>:</span>
<span id="cb1-191"><a href="#cb1-191" aria-hidden="true" tabindex="-1"></a>        num_lines <span class="op">+=</span><span class="dv">1</span>  </span>
<span id="cb1-192"><a href="#cb1-192" aria-hidden="true" tabindex="-1"></a>    spacing <span class="op">=</span> np.<span class="bu">round</span>(np.linspace(<span class="dv">0</span><span class="op">-</span>box_offset<span class="op">/</span><span class="dv">2</span>,box_offset<span class="op">+</span>box_offset<span class="op">/</span><span class="dv">2</span>,num_lines)).astype(<span class="bu">int</span>)</span>
<span id="cb1-193"><a href="#cb1-193" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> np.random.randint(<span class="dv">2</span>):</span>
<span id="cb1-194"><a href="#cb1-194" aria-hidden="true" tabindex="-1"></a>        line_offset <span class="op">*=</span><span class="dv">4</span></span>
<span id="cb1-195"><a href="#cb1-195" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> l <span class="kw">in</span> <span class="bu">range</span>(num_lines):</span>
<span id="cb1-196"><a href="#cb1-196" aria-hidden="true" tabindex="-1"></a>        thin_vline <span class="op">=</span> (line_offset<span class="op">+</span>spacing[l],<span class="dv">0</span>,line_offset<span class="op">+</span>spacing[l],h)</span>
<span id="cb1-197"><a href="#cb1-197" aria-hidden="true" tabindex="-1"></a>        draw.line(thin_vline,fill<span class="op">=</span>thin_color,width<span class="op">=</span><span class="bu">int</span>(spacing[<span class="dv">1</span>]<span class="op">/</span><span class="dv">3</span>))</span>
<span id="cb1-198"><a href="#cb1-198" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-199"><a href="#cb1-199" aria-hidden="true" tabindex="-1"></a>        thin_hline <span class="op">=</span> (<span class="dv">0</span>,line_offset<span class="op">+</span>spacing[l],w,line_offset<span class="op">+</span>spacing[l])</span>
<span id="cb1-200"><a href="#cb1-200" aria-hidden="true" tabindex="-1"></a>        draw.line(thin_hline,fill<span class="op">=</span>thin_color,width<span class="op">=</span><span class="bu">int</span>(spacing[<span class="dv">1</span>]<span class="op">/</span><span class="dv">3</span>))</span>
<span id="cb1-201"><a href="#cb1-201" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-202"><a href="#cb1-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-203"><a href="#cb1-203" aria-hidden="true" tabindex="-1"></a>    flipped <span class="op">=</span> ImageOps.flip(img)</span>
<span id="cb1-204"><a href="#cb1-204" aria-hidden="true" tabindex="-1"></a>    img2 <span class="op">=</span> Image.new(<span class="st">&quot;RGB&quot;</span>,(w,h<span class="op">*</span><span class="dv">2</span>))</span>
<span id="cb1-205"><a href="#cb1-205" aria-hidden="true" tabindex="-1"></a>    img2.paste(img,(<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb1-206"><a href="#cb1-206" aria-hidden="true" tabindex="-1"></a>    img2.paste(flipped,(<span class="dv">0</span>,h))</span>
<span id="cb1-207"><a href="#cb1-207" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-208"><a href="#cb1-208" aria-hidden="true" tabindex="-1"></a>    mirrored <span class="op">=</span> ImageOps.mirror(img2)</span>
<span id="cb1-209"><a href="#cb1-209" aria-hidden="true" tabindex="-1"></a>    img3 <span class="op">=</span> Image.new(<span class="st">&quot;RGB&quot;</span>,(w<span class="op">*</span><span class="dv">2</span>,h<span class="op">*</span><span class="dv">2</span>))</span>
<span id="cb1-210"><a href="#cb1-210" aria-hidden="true" tabindex="-1"></a>    img3.paste(img2,(<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb1-211"><a href="#cb1-211" aria-hidden="true" tabindex="-1"></a>    img3.paste(mirrored,(w,<span class="dv">0</span>))</span>
<span id="cb1-212"><a href="#cb1-212" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-213"><a href="#cb1-213" aria-hidden="true" tabindex="-1"></a>    tile <span class="op">=</span> Image.new(<span class="st">&quot;RGB&quot;</span>,(w<span class="op">*</span><span class="dv">4</span>,h<span class="op">*</span><span class="dv">4</span>))</span>
<span id="cb1-214"><a href="#cb1-214" aria-hidden="true" tabindex="-1"></a>    tile.paste(img3,(<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb1-215"><a href="#cb1-215" aria-hidden="true" tabindex="-1"></a>    tile.paste(img3,(w<span class="op">*</span><span class="dv">2</span>,<span class="dv">0</span>))</span>
<span id="cb1-216"><a href="#cb1-216" aria-hidden="true" tabindex="-1"></a>    tile.paste(img3,(<span class="dv">0</span>,h<span class="op">*</span><span class="dv">2</span>))</span>
<span id="cb1-217"><a href="#cb1-217" aria-hidden="true" tabindex="-1"></a>    tile.paste(img3,(w<span class="op">*</span><span class="dv">2</span>,h<span class="op">*</span><span class="dv">2</span>))</span>
<span id="cb1-218"><a href="#cb1-218" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-219"><a href="#cb1-219" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Coinflip whether to additionally draw diagonal lines across the whole image</span></span>
<span id="cb1-220"><a href="#cb1-220" aria-hidden="true" tabindex="-1"></a>    <span class="co"># These diagonal lines are usually present in some fashion in plaid patterns </span></span>
<span id="cb1-221"><a href="#cb1-221" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> np.random.randint(<span class="dv">2</span>):</span>
<span id="cb1-222"><a href="#cb1-222" aria-hidden="true" tabindex="-1"></a>        dlines <span class="op">=</span> _diagonal_lines(w<span class="op">*</span><span class="dv">4</span>,h<span class="op">*</span><span class="dv">4</span>,color<span class="op">=</span>bkg_color,n<span class="op">=</span><span class="dv">250</span>)</span>
<span id="cb1-223"><a href="#cb1-223" aria-hidden="true" tabindex="-1"></a>        tile.paste(dlines,(<span class="dv">0</span>,<span class="dv">0</span>),dlines)</span>
<span id="cb1-224"><a href="#cb1-224" aria-hidden="true" tabindex="-1"></a>    tile.show()</span>
<span id="cb1-225"><a href="#cb1-225" aria-hidden="true" tabindex="-1"></a>    _save_pattern(tile)</span>
<span id="cb1-226"><a href="#cb1-226" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-227"><a href="#cb1-227" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-228"><a href="#cb1-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-229"><a href="#cb1-229" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> _hsv2rgb(h,s,v):</span>
<span id="cb1-230"><a href="#cb1-230" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Utility function that wraps colorsys.hsv_to_rgb</span></span>
<span id="cb1-231"><a href="#cb1-231" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">tuple</span>(<span class="bu">round</span>(i <span class="op">*</span> <span class="dv">255</span>) <span class="cf">for</span> i <span class="kw">in</span> colorsys.hsv_to_rgb(h,s,v))</span>
<span id="cb1-232"><a href="#cb1-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-233"><a href="#cb1-233" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> _diagonal_lines(w,h,n<span class="op">=</span><span class="dv">40</span>,color<span class="op">=</span>(<span class="dv">255</span>,<span class="dv">255</span>,<span class="dv">255</span>)):</span>
<span id="cb1-234"><a href="#cb1-234" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Utility function to draw diagonal lines present in plaid patterns</span></span>
<span id="cb1-235"><a href="#cb1-235" aria-hidden="true" tabindex="-1"></a>    xspacing <span class="op">=</span> np.linspace(<span class="dv">0</span>,w,n)</span>
<span id="cb1-236"><a href="#cb1-236" aria-hidden="true" tabindex="-1"></a>    yspacing <span class="op">=</span> np.linspace(<span class="dv">0</span>,h,n)</span>
<span id="cb1-237"><a href="#cb1-237" aria-hidden="true" tabindex="-1"></a>    img <span class="op">=</span> Image.new(<span class="st">&quot;RGBA&quot;</span>,(w,h),(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb1-238"><a href="#cb1-238" aria-hidden="true" tabindex="-1"></a>    draw <span class="op">=</span> ImageDraw.Draw(img)</span>
<span id="cb1-239"><a href="#cb1-239" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-240"><a href="#cb1-240" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n):</span>
<span id="cb1-241"><a href="#cb1-241" aria-hidden="true" tabindex="-1"></a>        shape <span class="op">=</span> (xspacing[i],<span class="dv">0</span>,w,h<span class="op">-</span>yspacing[i])</span>
<span id="cb1-242"><a href="#cb1-242" aria-hidden="true" tabindex="-1"></a>        draw.line(shape,fill<span class="op">=</span>color,width<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb1-243"><a href="#cb1-243" aria-hidden="true" tabindex="-1"></a>        shape <span class="op">=</span> (<span class="dv">0</span>,yspacing[i],w<span class="op">-</span>xspacing[i],h)</span>
<span id="cb1-244"><a href="#cb1-244" aria-hidden="true" tabindex="-1"></a>        draw.line(shape,fill<span class="op">=</span>color,width<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb1-245"><a href="#cb1-245" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> img</span>
<span id="cb1-246"><a href="#cb1-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-247"><a href="#cb1-247" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> _save_pattern(image):</span>
<span id="cb1-248"><a href="#cb1-248" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Utility function to generate a random unique filename and save the image</span></span>
<span id="cb1-249"><a href="#cb1-249" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-250"><a href="#cb1-250" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Generate a random UUID (Universally Unique Identifier)</span></span>
<span id="cb1-251"><a href="#cb1-251" aria-hidden="true" tabindex="-1"></a>    random_uuid <span class="op">=</span> uuid.uuid4()</span>
<span id="cb1-252"><a href="#cb1-252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-253"><a href="#cb1-253" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create a random file name by converting the UUID to a string</span></span>
<span id="cb1-254"><a href="#cb1-254" aria-hidden="true" tabindex="-1"></a>    random_file_name <span class="op">=</span> <span class="bu">str</span>(random_uuid)</span>
<span id="cb1-255"><a href="#cb1-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-256"><a href="#cb1-256" aria-hidden="true" tabindex="-1"></a>    <span class="co"># You can add a file extension if needed</span></span>
<span id="cb1-257"><a href="#cb1-257" aria-hidden="true" tabindex="-1"></a>    random_file_name_with_extension <span class="op">=</span> random_file_name <span class="op">+</span> <span class="st">&#39;.png&#39;</span></span>
<span id="cb1-258"><a href="#cb1-258" aria-hidden="true" tabindex="-1"></a>    image.save(random_file_name_with_extension)</span>
<span id="cb1-259"><a href="#cb1-259" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-260"><a href="#cb1-260" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">&quot;__main__&quot;</span>:</span>
<span id="cb1-261"><a href="#cb1-261" aria-hidden="true" tabindex="-1"></a>    parser <span class="op">=</span> argparse.ArgumentParser(</span>
<span id="cb1-262"><a href="#cb1-262" aria-hidden="true" tabindex="-1"></a>        prog<span class="op">=</span><span class="st">&#39;Gone to Plaid&#39;</span>,</span>
<span id="cb1-263"><a href="#cb1-263" aria-hidden="true" tabindex="-1"></a>        description<span class="op">=</span><span class="st">&#39;A plaid pattern generator.&#39;</span>)</span>
<span id="cb1-264"><a href="#cb1-264" aria-hidden="true" tabindex="-1"></a>    parser.add_argument(</span>
<span id="cb1-265"><a href="#cb1-265" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;--mode&#39;</span>,</span>
<span id="cb1-266"><a href="#cb1-266" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;-m&#39;</span>,</span>
<span id="cb1-267"><a href="#cb1-267" aria-hidden="true" tabindex="-1"></a>    <span class="bu">type</span><span class="op">=</span><span class="bu">str</span>,</span>
<span id="cb1-268"><a href="#cb1-268" aria-hidden="true" tabindex="-1"></a>    choices<span class="op">=</span>[<span class="st">&#39;buffalo&#39;</span>, <span class="st">&#39;gingham&#39;</span>,<span class="st">&#39;plaid&#39;</span>],</span>
<span id="cb1-269"><a href="#cb1-269" aria-hidden="true" tabindex="-1"></a>    <span class="bu">help</span><span class="op">=</span><span class="st">&#39;Pattern type to generate.&#39;</span>,</span>
<span id="cb1-270"><a href="#cb1-270" aria-hidden="true" tabindex="-1"></a>    default<span class="op">=</span><span class="st">&#39;plaid&#39;</span></span>
<span id="cb1-271"><a href="#cb1-271" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1-272"><a href="#cb1-272" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-273"><a href="#cb1-273" aria-hidden="true" tabindex="-1"></a>    args <span class="op">=</span> parser.parse_args()</span>
<span id="cb1-274"><a href="#cb1-274" aria-hidden="true" tabindex="-1"></a>    main(args.mode)</span></code></pre></div>
