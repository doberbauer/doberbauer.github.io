<p>In January 2020 Netflix released the first season of “The Circle”, a
reality competition show in which players interact via the show’s
eponymous social media platform and rate each other on the quality of
those interactions. I was curious how the ratings system might work so I
wrote a Python script to emulate it. This could just as easily have been
done in a spreadsheet.</p>
<p>When a ratings session begins each player ranks the other players who
are eligible to be rated from last place to first place.</p>
<p>Not all players can be rated, but usually everyone can rate. This
often happens when new players enter The Circle and it creates an
opportunity for existing players to form alliances with noobies.</p>
<p>Let’s say there are six existing players, we’ll call them
<strong>Abe</strong>, <strong>Bruce</strong>, <strong>Carla</strong>,
<strong>Dylan</strong>, <strong>Emily</strong>, and
<strong>Francine</strong>. There are also two new players,
<strong>Georgia</strong> and <strong>Henrietta</strong>. They can rate
but can’t be rated.</p>
<p>In the script, <code>raters</code> defines the names of the people
who can rate - usually everyone. <code>ratees</code> defines everyone
who can be rated. This is a subset of raters. In the script I just
defined it as an array of indices of raters to keep things DRY.</p>
<p>The ratings matrix is initialized as a <code>n_ratees</code> x
<code>n_raters</code> matrix of zeros of type <code>int</code>.</p>
<p>The script then gathers input from each rater. Who did
<strong>Abe</strong> put in 4th place? Who did <strong>Carla</strong>
put in 1st place?</p>
<p>Once the ratings matrix is assembled, getting the final ratings is as
simple as getting the sorted per-row sum of the ratings matrix. The
lower you’re rated the higher your sum will be and vice versa.</p>
<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
</colgroup>
<thead>
<tr>
<th></th>
<th>Abe</th>
<th>Bruce</th>
<th>Carla</th>
<th>Dylan</th>
<th>Emily</th>
<th>Francine</th>
<th>Georgia</th>
<th>Henrietta</th>
<th><strong>SUM</strong></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Abe</strong></td>
<td>0</td>
<td>0</td>
<td>3</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>0</td>
<td>0</td>
<td><strong>7</strong></td>
<td></td>
</tr>
<tr>
<td><strong>Bruce</strong></td>
<td>4</td>
<td>0</td>
<td>2</td>
<td>2</td>
<td>2</td>
<td>3</td>
<td>3</td>
<td>1</td>
<td><strong>17</strong></td>
<td></td>
</tr>
<tr>
<td><strong>Carla</strong></td>
<td>3</td>
<td>2</td>
<td>0</td>
<td>0</td>
<td>4</td>
<td>1</td>
<td>2</td>
<td>2</td>
<td><strong>14</strong></td>
<td></td>
</tr>
<tr>
<td><strong>Dylan</strong></td>
<td>2</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>3</td>
<td>0</td>
<td>1</td>
<td>3</td>
<td><strong>10</strong></td>
<td></td>
</tr>
<tr>
<td><strong>Emily</strong></td>
<td>0</td>
<td>3</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>4</td>
<td>5</td>
<td>4</td>
<td><strong>17</strong></td>
<td></td>
</tr>
<tr>
<td><strong>Francine</strong></td>
<td>1</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>0</td>
<td>0</td>
<td>4</td>
<td>5</td>
<td><strong>22</strong></td>
<td></td>
</tr>
</tbody>
</table>
<p>From this we can see that <strong>Francine</strong> came in 6th
place, <strong>Emily</strong> and <strong>Bruce</strong> tied for 4th,
<strong>Carla</strong> is 3rd, <strong>Dylan</strong> in 2nd and
<strong>Abe</strong> came in 1st.</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>raters <span class="op">=</span> np.array([<span class="st">&quot;Abe&quot;</span>,<span class="st">&quot;Bruce&quot;</span>,<span class="st">&quot;Carla&quot;</span>,<span class="st">&quot;Dylan&quot;</span>,<span class="st">&quot;Emily&quot;</span>,<span class="st">&quot;Francine&quot;</span>,<span class="st">&quot;Georgia&quot;</span>,<span class="st">&quot;Henrietta&quot;</span>]) <span class="co">#Names of everyone doing ratings</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>ratees <span class="op">=</span> np.array([<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>]) <span class="co">#Indices of names of people being rated</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>n_raters <span class="op">=</span> <span class="bu">len</span>(raters) <span class="co">#Number of raters</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>n_ratees <span class="op">=</span> <span class="bu">len</span>(ratees) <span class="co">#Number of rateees</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>ratings_matrix <span class="op">=</span> np.zeros((n_ratees,n_raters),dtype <span class="op">=</span> <span class="bu">int</span>)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> rater <span class="kw">in</span> <span class="bu">range</span>(n_raters):</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    selection <span class="op">=</span> []</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> position <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>,n_ratees):</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>        options <span class="op">=</span> []</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f&quot;</span><span class="sc">{</span>raters[rater]<span class="sc">}</span><span class="ss">,</span><span class="ch">\n</span><span class="ss">Select someone for position </span><span class="sc">{</span>position<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">.</span><span class="ch">\n</span><span class="ss">&quot;</span>)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> r <span class="kw">in</span> ratees:</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> r <span class="kw">in</span> selection:</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>                <span class="cf">continue</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>            <span class="cf">elif</span> r <span class="op">==</span> rater:</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>                <span class="cf">continue</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>                <span class="bu">print</span>(<span class="ss">f&quot;</span><span class="sc">{</span>r<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss"> - </span><span class="sc">{</span>raters[ratees[r]]<span class="sc">}</span><span class="ss">&quot;</span>) </span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>                options.append(raters[ratees[r]])</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">len</span>(options)<span class="op">==</span><span class="dv">0</span>:</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>        ratee <span class="op">=</span> <span class="bu">int</span>(<span class="bu">input</span>(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">Type a number: &quot;</span>))<span class="op">-</span><span class="dv">1</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f&quot;</span><span class="ch">\n</span><span class="ss">You put </span><span class="sc">{</span>raters[ratee]<span class="sc">}</span><span class="ss"> in position </span><span class="sc">{</span>position<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">&quot;</span>)</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>        selection.append(ratee)</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>        ratings_matrix[ratee,rater] <span class="op">=</span> position</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>ratings_sum <span class="op">=</span> np.<span class="bu">sum</span>(ratings_matrix,axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>ratings <span class="op">=</span> raters[ratees[np.argsort(ratings_sum)]]</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> q <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(ratings)):</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f&quot;Position </span><span class="sc">{</span>q<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>ratings[q]<span class="sc">}</span><span class="ss">&quot;</span>)</span></code></pre></div>
