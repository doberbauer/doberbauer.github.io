<p>The NFT boom of 2021 opened my eyes to a whole world of generative
art. While some projects were more about the memes than the art, some
really neat things were being done with p5js, Processing, even Turtles.
They used programming and math to make beautiful procedural art and it
actually looked like <em>art</em>. I liked the idea of doing something
like that but the projects I worked on were more like paper dolls than
abstract modern art. Those projects ultimately flopped and by the next
year the bottom had completely fallen out of NFTs. Nonetheless I still
loved the idea of designing a script that generates art.</p>
<p>At the time I was getting interested in web scraping a had come
across the icrawler Python package. I had the idea of scraping a bunch
of images and making them into a collage. It was to be a daily series
where the images were pulled from the day’s top articles. I’d use
icrawler to download images, PIL to arrange them randomly and a instabot
to upload them to Instagram. The former and latter parts didn’t work
quite as I’d planned but overall it worked so I’d call it a success.</p>
<pre class="terminal"><code>pip install icrawler
pip install pillow
pip install instabot</code></pre>
<div class="sourceCode" id="cb2"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> date, datetime, timedelta</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> icrawler.builtin <span class="im">import</span> GoogleImageCrawler</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> time</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> PIL <span class="im">import</span> Image</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> random <span class="im">as</span> rnd</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> instabot <span class="im">import</span> Bot</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Parameters</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>today <span class="op">=</span> <span class="bu">str</span>(date.today())</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>today2 <span class="op">=</span> datetime.now().strftime(<span class="vs">r&quot;%B %d, %Y&quot;</span>)</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>classes <span class="op">=</span> [today, today2]</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>number<span class="op">=</span><span class="dv">100</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>out_size <span class="op">=</span> (<span class="dv">2160</span>, <span class="dv">2160</span>)</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>out_folder <span class="op">=</span> <span class="st">&#39;Downloads/&#39;</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> c <span class="kw">in</span> classes:</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>    googlecrawler <span class="op">=</span> GoogleImageCrawler(storage<span class="op">=</span>{<span class="st">&#39;root_dir&#39;</span>:out_folder})</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>      googlecrawler.crawl(keyword<span class="op">=</span>c,filters<span class="op">=</span><span class="va">None</span>,max_num<span class="op">=</span>number,offset<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>imgs <span class="op">=</span> os.listdir(out_folder)</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>out <span class="op">=</span> Image.new(mode<span class="op">=</span><span class="st">&quot;RGB&quot;</span>, size<span class="op">=</span>out_size, color<span class="op">=</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="bu">len</span>(imgs)):</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>    pWide<span class="op">=</span> <span class="bu">int</span>(out_size[<span class="dv">0</span>]<span class="op">/</span><span class="bu">len</span>(imgs)<span class="op">*</span><span class="dv">10</span>)</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>    img <span class="op">=</span> Image.<span class="bu">open</span>(out_folder <span class="op">+</span> imgs[i])</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>    wper <span class="op">=</span>(pWide<span class="op">/</span><span class="bu">float</span>(img.size[<span class="dv">0</span>]))</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>    hsize <span class="op">=</span> <span class="bu">int</span>((<span class="bu">float</span>(img.size[<span class="dv">1</span>] <span class="op">*</span> <span class="bu">float</span>(wper))))</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>    img <span class="op">=</span> img.resize((pWide,hsize), Image.ANTIALIAS)</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>    posX <span class="op">=</span> rnd.randrange(<span class="dv">0</span>,<span class="bu">int</span>(out_size[<span class="dv">0</span>]<span class="op">-</span>img.size[<span class="dv">0</span>]))</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>    posY <span class="op">=</span> rnd.randrange(<span class="dv">0</span>,<span class="bu">int</span>(out_size[<span class="dv">1</span>]<span class="op">-</span>img.size[<span class="dv">1</span>]))</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>    out.paste(img, (posX, posY))</span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>out.save(today <span class="op">+</span> <span class="st">&#39;.jpg&#39;</span>, <span class="st">&#39;JPEG&#39;</span>)</span></code></pre></div>
<p>I left out the instabot portion because every time it attempted to
upload Instagram would block the action and send me an alert that
someone was breaking into my account.</p>
<p>The search classes for the day’s top images could have been improved
for sure. I could have used the Google News API to pull headlines from
top stories and use those as icrawler search classes instead of
variations of the day’s date.</p>
<h1 id="results">Results</h1>
<p><strong>2022-02-01</strong> <img
src="https://bear-images.sfo2.cdn.digitaloceanspaces.com/hyperific-1705964577-0.jpg"
alt="Hyperific’s blog" /> <strong>2022-02-05</strong> <img
src="https://bear-images.sfo2.cdn.digitaloceanspaces.com/hyperific-1705964577-1.jpg"
alt="Hyperific’s blog" /> <strong>2022-02-09</strong> <img
src="https://bear-images.sfo2.cdn.digitaloceanspaces.com/hyperific-1705964577-2.jpg"
alt="Hyperific’s blog" /></p>
